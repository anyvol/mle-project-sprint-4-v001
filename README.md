# Подготовка среды

Все комманды выполняются из корневой директории проекта.
Создание виртуального окружения:

```
python3 -m venv .venv_recsys_start
```

Активация виртуального окружения:

```
source .venv_recsys_start/bin/activate
```

Установка в него необходимых Python-пакетов:
```
python3 -m pip install -r requirements.txt
```

Код для выполнения первой части проекта и выводы по нему находятся в файле `recommendations.ipynb`. 

# Сервис рекомендаций

Код сервиса рекомендаций находится в файле `recommendations_service.py`.
Также написаны вспомогательные сервисы `events_service.py` и `features_service.py` для организации онлайн-рекомендаций.
Логи сервиса пишутся в файл `test_service.log`

Сервис предоставляет рекомендации по трём эндпоинтам:
- `/recommendations_offline` - оффлайн рекомендации, подготовленные заранее с помощью модели ранжирования в ноутбуке `recommendatitions.ipynb`. Для "холодных" пользователей (для которых нет подготовленных оффлайновых) будут возвращаться популярные треки
- `/recommendations_online` - онлайн рекомендации, на основе последних взаимодействий пользователей с треками. Эти рекомендации генерируются на основе обработки прослушанных и предложению похожих треков. События о взаимодействиях собираются сервисом `events_service.py`
- `/recommendations` - смешанные рекомендации, полученные путём чередования онлайн и оффлайн рекомендаций. На четных местах - онлайн, на нечётных - оффлайн

Запуск сервиса рекомендаций:
```
uvicorn recommendations_service:app --port 8000
uvicorn features_service:app --port 8010
uvicorn events_service:app --port 8020
```

# Инструкции для тестирования сервиса

Код для тестирования сервиса находится в файле `test_service.py`.

Запуск скрипта тестирования:
```
python3 test_service.py
```

Тестирование пошагово можно выполнить в jupyter-ноутбуке `recommendations_service_testing.ipynb` (предпочтительный вариант)
Там же содержится и "расшифровка"/визуализация результатов работы сервиса - вывод названий и прочих атрибутов треков.
